<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="ezen.team.mapper.admin.CustomerMapper">

	<select id="csList" resultType="CsDTO">
<!-- 		create view csList as
		select a.cs_no, b.item_nm, a.cs_title, a.user_id, a.cs_dt, c.proc_id, c.proc_dt
		from cs_master as a, cmmn_cd as b, cs_reply c
		where a.cs_no = c.cs_no
		and a.cs_code = b.cs_code
	 	and 1=1 -->
	 	select * from cs_master
	 	where 1=1
	
        <if test="cs_code != 'ALL'">
            and cs_code = #{cs_code}
        </if>
        <if test="proc_sts != 'proc_all'">
            and proc_sts = #{proc_sts}
      </if>
    </select>
    
    <select id="csInfo" parameterType="Integer" resultType="CsDTO">
  	select * from cs_master left outer join cmmn_cd on cs_master.cs_code = cmmn_cd.item_cd
	where cs_master.cs_no = #{cs_code} 
  	</select>
  	
  	
  	  <insert id="csReply" parameterType="CsDTO">
	  	INSERT into cs_master(proc_sts, proc_id, sts_dt) VALUES(#{2}, #{proc_id}, #{SYSDATETIME()})
	  </insert>
    
</mapper>